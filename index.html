<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>paxos_go</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" type="text/css" href="css/normalize.css" />
  <link rel="stylesheet" type="text/css" href="css/ghp.css" />
</head>
<body>
<div class="content">
<h1>paxos_go</h1>

<p>A library enabling the achievement of consensus within a cluster of
independent computational units with unique cryptographic
identities.  Intra-cluster communications pass over a full mesh of inter-node
connections.  Clients can query the cluster or propose new commands which
will pass through the consensus process and upon agreement will become part
of the cluster&rsquo;s state.</p>

<h2>Clusters</h2>

<p>As the term is used here, a <strong>cluster</strong> is a group of coooperating processors,
<strong>servers</strong>.  The servers are driven by commands issued by <strong>clients</strong>; the
clients are not themselves part of the cluster and generally do not communicate
with one another.  Clients issue <strong>commands</strong>.  Commands are not issued in
any particular order and may take an arbitrary time to deliver.  While a
command may never be corrupt, it may be lost or delivered more than once.</p>

<h2>Consensus: the Back End</h2>

<p>Each server has at least one attached <strong>state machine</strong> whose state is
determined by
the sequence of commands passed to it.  Servers cooperate to achieve
<strong>consensus</strong>, which means that each server eventually delivers the same
sequence of commands to its state machine.  (More formally, at any given
time, if <em>a</em> is the sequence of commands delivered to state machine <em>A</em>
and <em>b</em> is the sequence of commands delivered to state machine <em>B</em>, then
we are guaranteed that either <em>a</em> is a prefix of <em>b</em> or <em>b</em> is a prefix of
<em>a</em> or <em>a</em> is identical to <em>b</em>.)</p>

<p>A state machine consists of a number of variables.  In paxos_go, one of
these is <em>stateNdx</em>, a 64-bit unsigned value.  Each execution of a command
causes stateNdx to be incremented.  Upon successful execution of a command,
the cluster always returns at least stateNdx to the client which requested
execution of the command.</p>

<h2>Applications</h2>

<p>A set of state machines as described above is referred to here as an
<strong>application</strong>. An application runs on a single cluster.  Each server in
the cluster has a state machine specific to the application.  Each such
application uses a variant of the Paxos protocol to achieve consensus.<br />
Each application running on a cluster has a unique identifier, its <strong>appNdx</strong>.</p>

<h2>pktComms/</h2>

<p>If there are <strong>N</strong> servers in a cluster, then at boot time each server
opens a connection to each of its <strong>N-1</strong> peers.  The low-level code in
pktComms/ manages these connections.  At boot, each server sends a <strong>Hello</strong>
to each of its peers, using the protocol specified in pktComms/p.proto.
The Hello message contains a message number (<strong>MsgN</strong>), which is always 1;
the 32-byte nodeID of the sender; the RSA public
key used for digital signatures (<strong>SigPubKey</strong>); the RSA public key used
for encoding commincations (<strong>CommsPubKey</strong>); the address the server
listens on (its ipV4 address and port number in string form); optionally
a <strong>Salt</strong>; and the SHA3-256 <strong>Hash</strong> of the fields present.</p>

<p>If the peer accepts the Hello, it will reply with an <strong>Ack</strong>, as specified
in the protocol, and leave the connection open.  If there was an error in
the Hello message, the peer with reply with an <strong>Error</strong> message, and close
the connection.</p>

<p>Normally there will be no error and the connection is left open.  From
this point the server periodically sends the peer a <strong>KeepAlive</strong> message,
to which the peer will reply with either an Ack or an Error message.  In
the normal case, the reply is an Ack and the connection remains open; if
there was an error, the peer replies with an error message and the connection
is closed.</p>

<p>At any appropriate point, instead of sending a KeepAlive, the server can
send a <strong>Bye</strong> message.  If this is well-formed, the peer will reply with
an Ack and close the connection.</p>

<h2>Application Front End</h2>

<p>In paxos_go, only back-end clients may originate commands which alter the
state of an application&rsquo;s state machine.  Commands to a server contain
enough information to identify the back-end client and the application.
Such commands also contain a hash which can be used to verify the integrity
of the command.  If verification fails, the message (the command) is
discarded and an error message returned.</p>

<p>External clients to the application generally communicate with servers
over a different set of listening ports.  External clients need not share
the same model of the data as the consensus servers, except that an
external client will always be able to obtain stateNdx, the 64-bit unsigned
value identifying the current state of the state machine.</p>

<p>As an example, consider a set of consensus servers which cooperate to appear
to the
outside world as a group of name servers.  Each name server is responsible
for a set of zone files and will answer standard DNS queries about each of
its zones.</p>

<p>The back-end cluster can store each such zone file by its content key.<br />
To the cluster, the state machine maps zone names (the fully qualified
domain name of a zone file) to a hash.  The validity of the hash is
confirmed by hashing the file.</p>
  <div class="f">
    <hr />
    <div class="license">
      <p><a href="LICENSE.html">LICENSE</a></p>
    </div>
    <div class="project">
      github <a href="https://github.com/jddixon/paxos_go">      <img src="img/GitHub-Mark-32px.png" 
        alt="link to project"  
        style="display: inline-block; margin-left: 0 auto; margin-right: 0 auto">
       </a> project
    </div>
    <div class="logo" >
      <a href="http://www.xlattice.org">
      <img src="img/xlattice-2014.jpg" alt="the XLattice Project" style="float: right;" >
      </a>
    </div>
  </div>
</div>
</body>
</html>
